var G=Math.pow;import{c as J,d as X,T as Y,n as q,a0 as j,aj as Pe,l as Z,V as E,b as n,ak as ee,al as N,ah as ce,t as U,Y as ue,m as A,R as te,S as $,r as M,W as de,a1 as me,am as Ce,an as Se,ac as ke,p as K,Z as B,af as ve,ao as Te,ag as _e,I as L,e as fe,ap as Ve,f as W,aq as Ue,ar as ze,w as ge,as as we,at as Re,au as he,av as Fe,aw as De,X as Ae,ax as $e,D as pe,y as Xe,A as V,ay as Ne,a6 as Ye,$ as Be,v as Ee,H as Le,x as F,ai as ae}from"./index-2f00049f.js";import{P as Oe}from"./index-e1775de3.js";import"./index-d01ffe12.js";import{F as Ze}from"./index-b878ca4c.js";import{I as Q}from"./index-9d11b80c.js";import{D as He}from"./index-753ee8e2.js";import{_ as Me}from"./NavBar.vue_vue_type_script_setup_true_lang-ec43c9a4.js";import{a as We,S as je}from"./index-70f70456.js";import{_ as Ge}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-7b17285f.js";import"./Icon-293a71c6.js";const oe=e=>Math.sqrt(G(e[0].clientX-e[1].clientX,2)+G(e[0].clientY-e[1].clientY,2)),ne=J("image-preview")[1];var qe=X({props:{src:String,show:Boolean,active:Number,minZoom:Y(q),maxZoom:Y(q),rootWidth:Y(Number),rootHeight:Y(Number)},emits:["scale","close"],setup(e,{emit:l}){const t=j({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),s=Pe(),r=Z(()=>{const{rootWidth:o,rootHeight:m}=e,v=m/o;return t.imageRatio>v}),h=Z(()=>{const{scale:o,moveX:m,moveY:v,moving:T,zooming:_}=t,z={transitionDuration:_||T?"0s":".3s"};if(o!==1){const O=m/o,Ie=v/o;z.transform=`scale(${o}, ${o}) translate(${O}px, ${Ie}px)`}return z}),b=Z(()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:m}=e,v=r.value?m/t.imageRatio:o;return Math.max(0,(t.scale*v-o)/2)}return 0}),p=Z(()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:m}=e,v=r.value?m:o*t.imageRatio;return Math.max(0,(t.scale*v-m)/2)}return 0}),c=o=>{o=N(o,+e.minZoom,+e.maxZoom+1),o!==t.scale&&(t.scale=o,l("scale",{scale:o,index:e.active}))},d=()=>{c(1),t.moveX=0,t.moveY=0},x=()=>{const o=t.scale>1?1:2;c(o),t.moveX=0,t.moveY=0};let I,w,g,i,C,u,P;const k=o=>{const{touches:m}=o,{offsetX:v}=s;s.start(o),I=m.length,w=t.moveX,g=t.moveY,P=Date.now(),t.moving=I===1&&t.scale!==1,t.zooming=I===2&&!v.value,t.zooming&&(i=t.scale,C=oe(o.touches))},R=o=>{const{touches:m}=o;if(s.move(o),(t.moving||t.zooming)&&ee(o,!0),t.moving){const{deltaX:v,deltaY:T}=s,_=v.value+w,z=T.value+g;t.moveX=N(_,-b.value,b.value),t.moveY=N(z,-p.value,p.value)}if(t.zooming&&m.length===2){const v=oe(m),T=i*v/C;c(T)}},a=()=>{if(I>1)return;const{offsetX:o,offsetY:m}=s,v=Date.now()-P,T=250,_=5;o.value<_&&m.value<_&&v<T&&(u?(clearTimeout(u),u=null,x()):u=setTimeout(()=>{l("close"),u=null},T))},f=o=>{let m=!1;(t.moving||t.zooming)&&(m=!0,t.moving&&w===t.moveX&&g===t.moveY&&(m=!1),o.touches.length||(t.zooming&&(t.moveX=N(t.moveX,-b.value,b.value),t.moveY=N(t.moveY,-p.value,p.value),t.zooming=!1),t.moving=!1,w=0,g=0,i=1,t.scale<1&&d(),t.scale>e.maxZoom&&(t.scale=+e.maxZoom))),ee(o,m),a(),s.reset()},S=o=>{const{naturalWidth:m,naturalHeight:v}=o.target;t.imageRatio=v/m};return E(()=>e.active,d),E(()=>e.show,o=>{o||d()}),()=>{const o={loading:()=>n(ce,{type:"spinner"},null)};return n(We,{class:ne("swipe-item"),onTouchstart:k,onTouchmove:R,onTouchend:f,onTouchcancel:f},{default:()=>[n(Q,{src:e.src,fit:"contain",class:ne("image",{vertical:r.value}),style:h.value,onLoad:S},o)]})}}});const[Je,D]=J("image-preview"),Ke=["show","transition","overlayStyle","closeOnPopstate"],Qe={show:Boolean,loop:U,images:ue(),minZoom:A(1/3),maxZoom:A(3),overlay:U,closeable:Boolean,showIndex:U,className:te,closeIcon:$("clear"),transition:String,beforeClose:Function,overlayClass:te,overlayStyle:Object,swipeDuration:A(300),startPosition:A(0),showIndicators:Boolean,closeOnPopstate:U,closeIconPosition:$("top-right")};var xe=X({name:Je,props:Qe,emits:["scale","close","closed","change","update:show"],setup(e,{emit:l,slots:t}){const s=M(),r=j({active:0,rootWidth:0,rootHeight:0}),h=()=>{if(s.value){const u=Te(s.value.$el);r.rootWidth=u.width,r.rootHeight=u.height,s.value.resize()}},b=u=>l("scale",u),p=u=>l("update:show",u),c=()=>{fe(e.beforeClose,{args:[r.active],done:()=>p(!1)})},d=u=>{u!==r.active&&(r.active=u,l("change",u))},x=()=>{if(e.showIndex)return n("div",{class:D("index")},[t.index?t.index({index:r.active}):`${r.active+1} / ${e.images.length}`])},I=()=>{if(t.cover)return n("div",{class:D("cover")},[t.cover()])},w=()=>n(je,{ref:s,lazyRender:!0,loop:e.loop,class:D("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:d},{default:()=>[e.images.map(u=>n(qe,{src:u,show:e.show,active:r.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:r.rootWidth,rootHeight:r.rootHeight,onScale:b,onClose:c},null))]}),g=()=>{if(e.closeable)return n(L,{role:"button",name:e.closeIcon,class:[D("close-icon",e.closeIconPosition),_e],onClick:c},null)},i=()=>l("closed"),C=(u,P)=>{var k;return(k=s.value)==null?void 0:k.swipeTo(u,P)};return de({swipeTo:C}),me(h),E([Ce,Se],h),E(()=>e.startPosition,u=>d(+u)),E(()=>e.show,u=>{const{images:P,startPosition:k}=e;u?(d(+k),ke(()=>{h(),C(+k,{immediate:!0})})):l("close",{index:r.active,url:P[r.active]})}),()=>n(ve,K({class:[D(),e.className],overlayClass:[D("overlay"),e.overlayClass],onClosed:i,"onUpdate:show":p},B(e,Ke)),{default:()=>[g(),w(),x(),I()]})}});let H;const et={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};function tt(){({instance:H}=Ue({setup(){const{state:e,toggle:l}=ze(),t=()=>{e.images=[]};return()=>n(xe,K(e,{onClosed:t,"onUpdate:show":l}),null)}}))}const at=(e,l=0)=>{if(Ve)return H||tt(),e=Array.isArray(e)?{images:e,startPosition:l}:e,H.open(W({},et,e)),H};ge(xe);const[ot,y,nt]=J("uploader");function le(e,l){return new Promise(t=>{if(l==="file"){t();return}const s=new FileReader;s.onload=r=>{t(r.target.result)},l==="dataUrl"?s.readAsDataURL(e):l==="text"&&s.readAsText(e)})}function ye(e,l){return we(e).some(t=>t.file?Re(l)?l(t.file):t.file.size>l:!1)}function lt(e,l){const t=[],s=[];return e.forEach(r=>{ye(r,l)?s.push(r):t.push(r)}),{valid:t,invalid:s}}const st=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i,it=e=>st.test(e);function be(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?it(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var rt=X({props:{name:q,item:Y(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview"],setup(e,{emit:l,slots:t}){const s=()=>{const{status:d,message:x}=e.item;if(d==="uploading"||d==="failed"){const I=d==="failed"?n(L,{name:"close",class:y("mask-icon")},null):n(ce,{class:y("loading")},null),w=Fe(x)&&x!=="";return n("div",{class:y("mask")},[I,w&&n("div",{class:y("mask-message")},[x])])}},r=d=>{const{name:x,item:I,index:w,beforeDelete:g}=e;d.stopPropagation(),fe(g,{args:[I,{name:x,index:w}],done:()=>l("delete")})},h=()=>l("preview"),b=()=>{if(e.deletable&&e.item.status!=="uploading"){const d=t["preview-delete"];return n("div",{role:"button",class:y("preview-delete",{shadow:!d}),tabindex:0,"aria-label":nt("delete"),onClick:r},[d?d():n(L,{name:"cross",class:y("preview-delete-icon")},null)])}},p=()=>{if(t["preview-cover"]){const{index:d,item:x}=e;return n("div",{class:y("preview-cover")},[t["preview-cover"](W({index:d},x))])}},c=()=>{const{item:d,lazyLoad:x,imageFit:I,previewSize:w}=e;return be(d)?n(Q,{fit:I,src:d.content||d.url,class:y("preview-image"),width:Array.isArray(w)?w[0]:w,height:Array.isArray(w)?w[1]:w,lazyLoad:x,onClick:h},{default:p}):n("div",{class:y("file"),style:he(e.previewSize)},[n(L,{class:y("file-icon"),name:"description"},null),n("div",{class:[y("file-name"),"van-ellipsis"]},[d.file?d.file.name:d.url]),p()])};return()=>n("div",{class:y("preview")},[c(),s(),b()])}});const ct={name:A(""),accept:$("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:A(1/0),imageFit:$("cover"),resultType:$("dataUrl"),uploadIcon:$("photograph"),uploadText:String,deletable:U,afterRead:Function,showUpload:U,modelValue:ue(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:U,previewOptions:Object,previewFullImage:U,maxSize:{type:[Number,String,Function],default:1/0}};var ut=X({name:ot,props:ct,emits:["delete","oversize","clickUpload","closePreview","clickPreview","update:modelValue"],setup(e,{emit:l,slots:t}){const s=M(),r=[],h=(a=e.modelValue.length)=>({name:e.name,index:a}),b=()=>{s.value&&(s.value.value="")},p=a=>{if(b(),ye(a,e.maxSize))if(Array.isArray(a)){const f=lt(a,e.maxSize);if(a=f.valid,l("oversize",f.invalid,h()),!a.length)return}else{l("oversize",a,h());return}a=j(a),l("update:modelValue",[...e.modelValue,...we(a)]),e.afterRead&&e.afterRead(a,h())},c=a=>{const{maxCount:f,modelValue:S,resultType:o}=e;if(Array.isArray(a)){const m=+f-S.length;a.length>m&&(a=a.slice(0,m)),Promise.all(a.map(v=>le(v,o))).then(v=>{const T=a.map((_,z)=>{const O={file:_,status:"",message:""};return v[z]&&(O.content=v[z]),O});p(T)})}else le(a,o).then(m=>{const v={file:a,status:"",message:""};m&&(v.content=m),p(v)})},d=a=>{const{files:f}=a.target;if(e.disabled||!f||!f.length)return;const S=f.length===1?f[0]:[].slice.call(f);if(e.beforeRead){const o=e.beforeRead(S,h());if(!o){b();return}if($e(o)){o.then(m=>{c(m||S)}).catch(b);return}}c(S)};let x;const I=()=>l("closePreview"),w=a=>{if(e.previewFullImage){const f=e.modelValue.filter(be),S=f.map(o=>(o.file&&!o.url&&o.status!=="failed"&&(o.url=URL.createObjectURL(o.file),r.push(o.url)),o.url)).filter(Boolean);x=at(W({images:S,startPosition:f.indexOf(a),onClose:I},e.previewOptions))}},g=()=>{x&&x.close()},i=(a,f)=>{const S=e.modelValue.slice(0);S.splice(f,1),l("update:modelValue",S),l("delete",a,h(f))},C=(a,f)=>{const S=["imageFit","deletable","previewSize","beforeDelete"],o=W(B(e,S),B(a,S,!0));return n(rt,K({item:a,index:f,onClick:()=>l("clickPreview",a,h(f)),onDelete:()=>i(a,f),onPreview:()=>w(a)},B(e,["name","lazyLoad"]),o),B(t,["preview-cover","preview-delete"]))},u=()=>{if(e.previewImage)return e.modelValue.map(C)},P=a=>l("clickUpload",a),k=()=>{if(e.modelValue.length>=e.maxCount||!e.showUpload)return;const a=e.readonly?null:n("input",{ref:s,type:"file",class:y("input"),accept:e.accept,capture:e.capture,multiple:e.multiple,disabled:e.disabled,onChange:d},null);return t.default?n("div",{class:y("input-wrapper"),onClick:P},[t.default(),a]):n("div",{class:y("upload",{readonly:e.readonly}),style:he(e.previewSize),onClick:P},[n(L,{name:e.uploadIcon,class:y("upload-icon")},null),e.uploadText&&n("span",{class:y("upload-text")},[e.uploadText]),a])},R=()=>{s.value&&!e.disabled&&s.value.click()};return De(()=>{r.forEach(a=>URL.revokeObjectURL(a))}),de({chooseFile:R,closeImagePreview:g}),Ae(()=>e.modelValue),()=>n("div",{class:y()},[n("div",{class:y("wrapper",{disabled:e.disabled})},[u(),k()])])}});const dt=ge(ut);const se=X({__name:"UploaderImage",setup(e){function l(s){return s.type==="image/jpeg"||s.type==="image/png"||s.type==="image/jpg"?!0:(Ye("请上传正确格式的图片"),!1)}function t(s){}return(s,r)=>{const h=dt;return pe(),Xe(h,{"max-size":700*1024,"max-count":1,"before-read":l,"after-read":t,accept:"image/*"},{default:V(()=>[Ne(s.$slots,"default")]),_:3})}}}),ie=[{text:"男",value:0},{text:"女",value:1}],re=[{text:"不展示",value:0},{text:"学生",value:1},{text:"自由职业",value:2},{text:"IT/互联网/通信",value:3},{text:"金融",value:4},{text:"健康/医疗",value:5},{text:"工业/制造业",value:6},{text:"零售",value:7},{text:"贸易",value:8},{text:"教育/科研",value:9},{text:"培训",value:10},{text:"房地产/建筑",value:11},{text:"文化/艺术",value:12},{text:"影视/娱乐",value:13},{text:"法律/会计/咨询",value:14},{text:"媒体/广告/公关",value:15},{text:"体育/健身",value:16},{text:"企事业单位",value:17}],mt=X({__name:"EditUserInfo",setup(e){const l=Be(),{avatar:t,gender:s,industry:r,cover:h}=l.getUserInfo,b=M(!1),p=M(!1),c=j({nickname:"",sign:"",genderText:"",industryText:"",industryValues:[0],genderValues:[0]}),d=({selectedOptions:g})=>{c.genderText=g[0].text,ae(JSON.stringify(g)),b.value=!1},x=({selectedOptions:g})=>{c.industryText=g[0].text,ae(JSON.stringify(g)),p.value=!1},I=(g,i=0)=>{var C;return(C=g.find(u=>u.value===i))==null?void 0:C.text};function w(){var g,i;Object.keys(c).forEach(C=>{c[C]=l.getUserInfo[C]}),c.genderText=(g=I(ie,s))!=null?g:"",c.industryText=(i=I(re,r))!=null?i:"",c.industryValues=[r!=null?r:0],c.genderValues=[s]}return me(()=>{w()}),(g,i)=>{const C=He,u=Q,P=Ze,k=Oe,R=ve;return pe(),Ee("div",null,[n(Me),n(C,null,{default:V(()=>[Le("基本信息")]),_:1}),n(P,{label:"头像","label-class":"font-bold","input-align":"right",center:!0,border:!1,"is-link":"",readonly:""},{input:V(()=>[n(se,null,{default:V(()=>[n(u,{class:"avatar",round:"",fit:"cover",src:F(t)},null,8,["src"])]),_:1})]),_:1}),n(P,{label:"昵称",readonly:"","label-class":"font-bold","input-align":"right",center:!0,border:!1,modelValue:c.nickname,"onUpdate:modelValue":i[0]||(i[0]=a=>c.nickname=a),"is-link":"",to:"/editNickname"},null,8,["modelValue"]),n(P,{label:"性别",readonly:"","label-class":"font-bold","input-align":"right",center:!0,border:!1,modelValue:c.genderText,"onUpdate:modelValue":i[1]||(i[1]=a=>c.genderText=a),"is-link":"",onClick:i[2]||(i[2]=a=>b.value=!0)},null,8,["modelValue"]),n(P,{label:"签名",readonly:"","label-class":"font-bold","input-align":"right",center:!0,border:!1,modelValue:c.sign,"onUpdate:modelValue":i[3]||(i[3]=a=>c.sign=a),"is-link":"",to:"/editSign"},null,8,["modelValue"]),n(P,{label:"主页封面","label-class":"font-bold","input-align":"right",center:!0,border:!1,"is-link":"",readonly:""},{input:V(()=>[n(se,null,{default:V(()=>[n(u,{class:"cover",fit:"cover",src:F(h)?F(h):F(t)},null,8,["src"])]),_:1})]),_:1}),n(P,{label:"行业",readonly:"","label-class":"font-bold","input-align":"right",center:!0,border:!1,modelValue:c.industryText,"onUpdate:modelValue":i[4]||(i[4]=a=>c.industryText=a),"is-link":"",onClick:i[5]||(i[5]=a=>p.value=!0)},null,8,["modelValue"]),n(R,{show:b.value,"onUpdate:show":i[8]||(i[8]=a=>b.value=a),position:"bottom",round:""},{default:V(()=>[n(k,{"visible-option-num":"3",modelValue:c.genderValues,"onUpdate:modelValue":i[6]||(i[6]=a=>c.genderValues=a),columns:F(ie),onConfirm:d,onCancel:i[7]||(i[7]=a=>b.value=!1)},null,8,["modelValue","columns"])]),_:1},8,["show"]),n(R,{show:p.value,"onUpdate:show":i[11]||(i[11]=a=>p.value=a),position:"bottom",round:""},{default:V(()=>[n(k,{modelValue:c.industryValues,"onUpdate:modelValue":i[9]||(i[9]=a=>c.industryValues=a),columns:F(re),onConfirm:x,onCancel:i[10]||(i[10]=a=>p.value=!1)},null,8,["modelValue","columns"])]),_:1},8,["show"])])}}});const St=Ge(mt,[["__scopeId","data-v-cdaea4e6"]]);export{St as default};
